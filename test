import React from 'react';

const FolderSelector = () => {
  const handleFolderSelect = async () => {
    const folderPicker = document.createElement('input');
    folderPicker.setAttribute('type', 'file');
    folderPicker.setAttribute('webkitdirectory', 'true');
    folderPicker.setAttribute('directory', 'true');

    // Wait for user to select a folder
    await new Promise((resolve) => {
      folderPicker.addEventListener('change', resolve, { once: true });
      folderPicker.click();
    });

    const folderPath = folderPicker.files[0].path;
    console.log(folderPath);
    // Do something with the selected folder path, like set it in state
  };

  return (
    <div>
      <label htmlFor="folderInput">Select a folder:</label>
      <input
        type="text"
        id="folderInput"
        onClick={handleFolderSelect}
        readOnly
        placeholder="Click to select folder"
      />
    </div>
  );


async function getSubfolders() {
  try {
    const dirHandle = await window.showDirectoryPicker();
    const dirEntries = await dirHandle.values();

    // Filter out subdirectories
    const subfolders = [];
    for await (const entry of dirEntries) {
      if (entry.kind === 'directory') {
        subfolders.push(entry.name);
      }
    }

    console.log('Subfolders:', subfolders);
    return subfolders;
  } catch (error) {
    console.error('Error accessing directory:', error);
    return [];
  }
}

getSubfolders();


};

export default FolderSelector;


import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;

@GetMapping("/file/{filePath}")
public ResponseEntity<byte[]> getFile(@PathVariable String filePath) {
    try {
        Path path = Paths.get(filePath);
        byte[] fileBytes = Files.readAllBytes(path);
        return ResponseEntity.ok().body(fileBytes);
    } catch (IOException e) {
        e.printStackTrace();
        return ResponseEntity.notFound().build();
    }
}



